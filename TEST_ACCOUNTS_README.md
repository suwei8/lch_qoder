# 洗车IOT管理系统 - 测试商户账号创建指南

## 概述

本指南介绍如何为洗车IOT管理系统创建测试商户账号和相关数据，用于系统功能测试和演示。

## 快速开始

### 方式一：一键创建（推荐）

运行以下脚本可一次性创建所有测试数据：

```bash
./create-all-test-data.bat
```

这将自动创建：
- 完整的数据库结构
- 6个测试商户账号
- 14个测试洗车设备
- 146个模拟订单记录
- 21条余额流水记录

### 方式二：分步创建

如果需要分步创建或定制化创建，可以按以下顺序运行：

1. **初始化数据库**
   ```bash
   node init-database-simple.js
   ```

2. **创建基础测试商户**
   ```bash
   node create-test-merchant.js
   ```

3. **批量创建更多商户**
   ```bash
   node create-batch-merchants.js
   ```

4. **创建测试订单数据**
   ```bash
   node create-test-orders.js
   ```

5. **查看创建结果**
   ```bash
   node show-test-accounts.js
   ```

## 测试数据说明

### 创建的商户账号

| 商户名称 | 联系人 | 手机号 | 地址 | 设备数 |
|---------|--------|--------|------|--------|
| 测试洗车店 | 李经理 | 13900139001 | 北京市朝阳区测试大街88号 | 1 |
| 青青洗车服务中心 | 李老板 | 13900139002 | 上海市浦东新区陆家嘴金融中心A座 | 2 |
| 星光汽车美容服务有限公司 | 王总 | 13900139003 | 广州市天河区珠江新城CBD核心区B座 | 2 |
| 蓝天汽车服务连锁店 | 赵经理 | 13900139004 | 深圳市南山区科技园南区深圳湾1号 | 2 |
| 快洁自助洗车服务站 | 陈店长 | 13900139005 | 杭州市西湖区文三路398号 | 3 |
| 洁净汽车美容养护中心 | 张老板 | 13900139006 | 南京市建邺区河西中央商务区 | 3 |

### 用户账号特点

- 每个商户都有对应的用户账号
- 用户余额范围：60-150元
- 赠送余额范围：20-80元
- 所有商户都已审核通过

### 设备数据特点

- 每个商户有2-3台洗车设备
- 设备状态：70%在线，30%离线
- 价格范围：2.5-3.5元/分钟
- 最低消费：4-6元
- 最长使用时间：90-150分钟

### 订单数据特点

- 每台设备有5-15个历史订单
- 订单状态：大部分已完成，少量关闭或使用中
- 订单金额：5-50元随机
- 支付方式：微信支付、余额支付、赠送余额支付
- 使用时长：5-120分钟

## 系统访问

创建完成后，可以通过以下方式访问系统：

### 平台管理后台
- **地址**: http://localhost:5601
- **账号**: admin
- **密码**: 123456

### 商户管理后台
- **地址**: http://localhost:5601/merchant-login
- **账号**: 使用测试手机号（见下方列表）
- **密码**: 123456

### 快速访问指南
- **指南页面**: `merchant-login-guide.html`
- 可以在浏览器中打开此文件，快速访问不同的管理后台

### 后端API
- **地址**: http://localhost:5603/api
- **文档**: http://localhost:5603/api/docs

## 测试建议

### 功能测试点

1. **用户管理**
   - 查看用户列表和详情
   - 编辑用户信息
   - 调整用户余额

2. **商户管理**
   - 查看商户列表和详情
   - 商户审核流程
   - 编辑商户信息
   - 商户财务结算

3. **设备管理**
   - 查看设备状态
   - 设备远程控制
   - 设备使用统计

4. **订单管理**
   - 查看订单列表
   - 订单状态管理
   - 订单搜索和筛选
   - 异常订单处理

5. **财务管理**
   - 收入统计报表
   - 商户分润管理
   - 余额流水查询

6. **数据统计**
   - 各类数据图表
   - 营业数据分析
   - 设备使用效率

### 测试场景

1. **商户入驻流程**
   - 使用测试手机号注册商户
   - 提交审核资料
   - 平台审核通过/拒绝

2. **设备管理流程**
   - 添加新设备
   - 设备状态监控
   - 设备故障处理

3. **订单业务流程**
   - 用户扫码下单
   - 支付处理
   - 设备启动
   - 使用完成结算

4. **财务结算流程**
   - 查看待结算金额
   - 执行商户结算
   - 生成结算记录

## 数据库信息

- **主机**: 127.0.0.1:3306
- **数据库**: lch_v4
- **用户名**: root
- **密码**: cCNyGNDDD5Mp6d9f

## 注意事项

1. **数据重置**: 如需重新创建数据，可重新运行脚本，系统会自动清理旧数据
2. **端口占用**: 确保3306端口(MySQL)可用
3. **网络依赖**: 创建脚本需要访问数据库，确保网络连接正常
4. **数据完整性**: 建议按顺序创建数据，避免跳过步骤导致关联问题

## 故障排除

### 常见问题

1. **数据库连接失败**
   - 检查MySQL服务是否启动
   - 验证连接参数是否正确
   - 确认防火墙设置

2. **脚本执行失败**
   - 检查Node.js环境
   - 确认mysql2依赖已安装
   - 查看具体错误信息

3. **数据不完整**
   - 按顺序重新执行脚本
   - 检查数据库约束冲突
   - 清理部分数据后重试

### 联系支持

如遇到问题，请提供：
- 详细错误信息
- 执行步骤
- 系统环境信息

---

*最后更新: 2025-09-06*