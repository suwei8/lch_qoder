# 🚀 用户端H5项目启动指南

## 📋 项目概述

**项目名称**: 亮车惠用户端H5应用  
**开发状态**: ✅ 基础框架完成，核心功能已实现  
**技术栈**: Vue 3 + TypeScript + Vant + Pinia + Vite  
**端口**: 5604

## 🎯 已完成的核心功能

### ✅ 1. 完整项目架构
- Vue 3 + TypeScript + Vant移动端组件库
- Pinia状态管理 + Vue Router路由
- Axios网络请求 + 统一错误处理
- 移动端响应式设计

### ✅ 2. 用户认证系统
- **微信OAuth登录**: 支持微信公众号授权登录
- **手机号登录**: 短信验证码登录
- **自动登录**: Token持久化存储
- **登录守卫**: 路由级别权限控制

### ✅ 3. 首页功能
- **用户信息**: 头像、昵称、余额展示
- **位置服务**: 微信API + 浏览器API双重定位
- **快捷入口**: 充值、订单、优惠券、个人中心
- **附近门店**: 基于位置的门店列表和距离计算
- **门店状态**: 实时设备可用性显示

### ✅ 4. 门店详情页
- **门店信息**: 地址、电话、营业时间
- **设备列表**: 实时状态更新和价格展示
- **便民功能**: 一键导航、致电门店
- **状态管理**: 空闲/繁忙/离线设备状态

### ✅ 5. 设备控制系统
- **智能控制**: 启动、停止、延长洗车时间
- **实时计时**: 使用时长和费用实时计算
- **进度显示**: 基于最低消费的可视化进度
- **异常处理**: 设备故障检测和客服联系

## 🛠️ 安装启动步骤

### 前置要求
- Node.js >= 16.0.0
- npm 或 yarn 包管理器

### 1. 安装依赖
```bash
cd lch-user-h5
npm install
```

### 2. 启动开发服务器
```bash
npm run dev
```

### 3. 访问应用
- **本地访问**: http://localhost:5604
- **网络访问**: http://[本机IP]:5604

## 📱 功能演示路径

### 🔐 登录体验
1. 访问 http://localhost:5604
2. 自动跳转到登录页面(`/auth`)
3. 测试手机号登录功能(模拟验证码)
4. 体验微信登录界面(需微信环境)

### 🏠 首页功能
1. 登录后自动跳转首页(`/`)
2. 查看用户信息和余额显示
3. 点击位置获取附近洗车点
4. 体验快捷功能入口

### 🏪 门店服务
1. 点击首页门店卡片进入详情页
2. 查看门店信息和设备状态
3. 选择可用设备启动洗车
4. 体验导航和致电功能

### 🎮 设备控制
1. 选择空闲设备进入控制页
2. 启动洗车服务观察界面变化
3. 实时查看计时和费用计算
4. 测试提前结束和延长功能

## 📋 页面清单

### ✅ 已实现页面
| 路由 | 页面名称 | 功能状态 | 描述 |
|------|----------|----------|------|
| `/` | 首页 | ✅ 完成 | 用户信息、位置服务、门店列表 |
| `/auth` | 登录页 | ✅ 完成 | 微信登录、手机验证码登录 |
| `/store/:id` | 门店详情 | ✅ 完成 | 门店信息、设备列表、操作功能 |
| `/device/:storeId/:deviceId` | 设备控制 | ✅ 完成 | 设备控制、实时计时、状态管理 |

### 🚧 待开发页面
| 路由 | 页面名称 | 开发状态 | 优先级 |
|------|----------|----------|--------|
| `/payment` | 支付页面 | 📋 规划中 | 高 |
| `/orders` | 订单列表 | 📋 规划中 | 高 |
| `/order/:id` | 订单详情 | 📋 规划中 | 中 |
| `/recharge` | 充值中心 | 📋 规划中 | 高 |
| `/coupons` | 优惠券 | 📋 规划中 | 中 |
| `/profile` | 个人中心 | 📋 规划中 | 中 |

## 🔧 开发配置

### 环境变量配置
```bash
# .env 文件
VITE_API_BASE_URL=http://localhost:5603/api  # 后端API地址
VITE_WECHAT_APP_ID=wx1234567890abcdef        # 微信AppID
VITE_APP_TITLE=亮车惠 · 自助洗车              # 应用标题
```

### Vite配置特性
- **自动导入**: Vant组件自动按需导入
- **API代理**: 开发环境自动代理到后端服务
- **代码分割**: 按页面和第三方库自动分割
- **移动端适配**: viewport配置和响应式支持

## 📊 技术架构亮点

### 🎨 移动端优化
- **Vant UI**: 专业移动端组件库
- **响应式设计**: 适配各种移动设备
- **触摸优化**: 44px最小点击区域
- **安全区域**: iPhone刘海屏适配

### 🔐 状态管理
- **Pinia Store**: 现代化状态管理
- **持久化**: 用户信息和Token自动保存
- **响应式**: 状态变化自动更新UI
- **模块化**: 按功能模块组织状态

### 🌐 网络请求
- **Axios封装**: 统一请求和响应处理
- **自动认证**: Token自动添加到请求头
- **错误处理**: 友好的错误提示和重试
- **Loading管理**: 请求状态的统一管理

### 📱 微信集成
- **JS-SDK**: 微信开发者工具支持
- **OAuth登录**: 公众号授权登录流程
- **位置服务**: 微信定位API集成
- **分享功能**: 门店信息分享能力

## 🧪 测试建议

### 本地测试
1. **桌面浏览器**: 开启开发者工具移动设备模拟
2. **移动设备**: 使用本机IP地址访问
3. **功能测试**: 按照演示路径逐一体验

### 真机测试
1. **内网穿透**: 使用ngrok等工具暴露本地服务
2. **微信测试**: 在微信中打开测试链接
3. **设备适配**: 在不同设备上测试UI适配

## 🚀 下一步开发计划

### 第一优先级 (核心功能)
1. **支付系统**: 微信支付JSAPI集成
2. **订单管理**: 订单创建、查询、状态更新
3. **设备对接**: 真实设备控制API集成

### 第二优先级 (增值功能)
1. **充值中心**: 套餐购买和余额管理
2. **优惠券系统**: 优惠券发放和使用
3. **个人中心**: 用户信息和设置管理

### 第三优先级 (体验优化)
1. **消息通知**: 微信模板消息推送
2. **客服系统**: 在线客服聊天功能
3. **数据统计**: 用户行为分析和统计

## 💡 开发提示

### 调试建议
- 使用Vue DevTools浏览器插件
- 开启Vite的网络访问便于移动设备测试
- 使用微信开发者工具调试微信相关功能

### 代码规范
- 遵循Vue 3 Composition API最佳实践
- 使用TypeScript提供类型安全
- 组件和页面按功能模块组织

### 性能优化
- 路由懒加载减少初始包大小
- 图片懒加载和压缩优化
- 合理使用Pinia状态避免过度存储

---

🎉 **恭喜！用户端H5应用基础框架已经完成，可以开始体验核心功能了！**

接下来可以继续开发支付、订单等功能模块，或者先体验现有功能并收集反馈。