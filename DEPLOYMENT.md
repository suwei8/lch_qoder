# ğŸš€ äº®è½¦æƒ æ™ºèƒ½æ´—è½¦ç®¡ç†ç³»ç»Ÿ - å¿«é€Ÿéƒ¨ç½²æŒ‡å—

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

äº®è½¦æƒ æ˜¯ä¸€ä¸ªåŸºäºç‰©è”ç½‘æŠ€æœ¯çš„æ™ºèƒ½æ´—è½¦æœåŠ¡å¹³å°ï¼ŒåŒ…å«ç”¨æˆ·H5ç«¯ã€å•†æˆ·ç®¡ç†ç«¯ã€å¹³å°ç®¡ç†ç«¯å’Œåç«¯APIæœåŠ¡å››ä¸ªæ ¸å¿ƒæ¨¡å—ã€‚

### ğŸ—ï¸ ç³»ç»Ÿæ¶æ„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ç”¨æˆ·ç«¯ (H5)    â”‚  â”‚  å•†æˆ·ç«¯(PC+H5)   â”‚  â”‚  å¹³å°ç«¯(PC+H5)   â”‚
â”‚   ç«¯å£: 5604     â”‚  â”‚   ç«¯å£: 5609     â”‚  â”‚   ç«¯å£: 5602     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                     â”‚                     â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚          åç«¯APIæœåŠ¡                â”‚
                â”‚          ç«¯å£: 5603                 â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚           æ•°æ®å±‚                     â”‚
                â”‚    MySQL:3306   Redis:6379          â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯æŠ€æœ¯æ ˆ
- **æ¡†æ¶**: NestJS + TypeScript
- **æ•°æ®åº“**: MySQL 8.0 + Redis 6.0
- **è®¤è¯**: JWT + å¾®ä¿¡OAuth
- **æ”¯ä»˜**: å¾®ä¿¡æ”¯ä»˜JSAPI
- **è®¾å¤‡**: æ™ºé“¾ç‰©è”IoTåè®®

### å‰ç«¯æŠ€æœ¯æ ˆ
- **æ¡†æ¶**: Vue 3 + TypeScript
- **UIç»„ä»¶**: Element Plus
- **çŠ¶æ€ç®¡ç†**: Pinia
- **æ„å»ºå·¥å…·**: Vite
- **è·¯ç”±**: Vue Router 4

## ğŸš€ å¿«é€Ÿéƒ¨ç½²

### å‰ç½®è¦æ±‚
- Node.js >= 16.0.0
- MySQL >= 8.0
- Redis >= 6.0
- npm æˆ– yarn

### 1ï¸âƒ£ å…‹éš†é¡¹ç›®
```bash
git clone <repository-url>
cd lch_qoder
```

### 2ï¸âƒ£ å®‰è£…ä¾èµ–
```bash
# å®‰è£…æ ¹ç›®å½•ä¾èµ–
npm install

# å®‰è£…åç«¯ä¾èµ–
cd lch-backend
npm install
cd ..

# å®‰è£…å¹³å°ç®¡ç†ç«¯ä¾èµ–
cd lch-platform
npm install
cd ..

# å®‰è£…å•†æˆ·ç®¡ç†ç«¯ä¾èµ–
cd lch-merchant
npm install
cd ..

# å®‰è£…ç”¨æˆ·H5ç«¯ä¾èµ–
cd lch-user-h5
npm install
cd ..
```

### 3ï¸âƒ£ æ•°æ®åº“é…ç½®

#### å¯¼å…¥æ•°æ®åº“
```bash
# åˆ›å»ºæ•°æ®åº“
mysql -u root -p -e "CREATE DATABASE IF NOT EXISTS lch_v4 CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;"

# å¯¼å…¥æ•°æ®
mysql -u root -p lch_v4 < database_export.sql
```

#### é…ç½®æ•°æ®åº“è¿æ¥
å¤åˆ¶å¹¶ä¿®æ”¹ç¯å¢ƒé…ç½®æ–‡ä»¶ï¼š
```bash
cp .env.template .env.local
```

ç¼–è¾‘ `.env.local` æ–‡ä»¶ï¼Œé…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯ï¼š
```bash
# æ•°æ®åº“é…ç½®
DATABASE_HOST=127.0.0.1
DATABASE_PORT=3306
DATABASE_USERNAME=root
DATABASE_PASSWORD=your_mysql_password
DATABASE_NAME=lch_v4

# Redisé…ç½®
REDIS_HOST=127.0.0.1
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=
```

### 4ï¸âƒ£ å¯åŠ¨æœåŠ¡

#### æ–¹æ³•ä¸€ï¼šä½¿ç”¨å¿«é€Ÿå¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰
```bash
# Windows
./quick-start.bat

# æˆ–è€…ä½¿ç”¨PowerShell
./start-dev.ps1
```

#### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨å¯åŠ¨ï¼ˆæŒ‰ç…§ä»¥ä¸‹é¡ºåºï¼‰

1. **å¯åŠ¨åç«¯APIæœåŠ¡**
```bash
cd lch-backend
npm run start:dev
# æœåŠ¡å°†åœ¨ http://localhost:5603 å¯åŠ¨
```

2. **å¯åŠ¨å¹³å°ç®¡ç†ç«¯**
```bash
cd lch-platform
npm run dev
# æœåŠ¡å°†åœ¨ http://localhost:5602 å¯åŠ¨
```

3. **å¯åŠ¨ç”¨æˆ·H5ç«¯**
```bash
cd lch-user-h5
npm run dev
# æœåŠ¡å°†åœ¨ http://localhost:5604 å¯åŠ¨
```

4. **å¯åŠ¨å•†æˆ·ç®¡ç†ç«¯**
```bash
cd lch-merchant
npm run dev
# æœåŠ¡å°†åœ¨ http://localhost:5609 å¯åŠ¨
```

### 5ï¸âƒ£ è®¿é—®ç³»ç»Ÿ

| æ¨¡å— | URL | è¯´æ˜ |
|------|-----|------|
| åç«¯API | http://localhost:5603 | APIæœåŠ¡å’Œæ¥å£æ–‡æ¡£ |
| å¹³å°ç®¡ç†ç«¯ | http://localhost:5602 | å¹³å°è¿è¥ç®¡ç†åå° |
| ç”¨æˆ·H5ç«¯ | http://localhost:5604 | å¾®ä¿¡H5ç”¨æˆ·ç«¯ |
| å•†æˆ·ç®¡ç†ç«¯ | http://localhost:5609 | å•†æˆ·ç®¡ç†åå° |

### 6ï¸âƒ£ é»˜è®¤è´¦æˆ·

#### å¹³å°ç®¡ç†å‘˜
- è´¦å·: `admin`
- å¯†ç : `123456`
- è®¿é—®: http://localhost:5602/login

#### æµ‹è¯•å•†æˆ·
- è´¦å·: `merchant_test`
- å¯†ç : `123456`
- è®¿é—®: http://localhost:5609/login

## ğŸ”§ å¼€å‘é…ç½®

### ç«¯å£é…ç½®
ç¡®ä¿ä»¥ä¸‹ç«¯å£æœªè¢«å ç”¨ï¼š
- `5602`: å¹³å°ç®¡ç†ç«¯
- `5603`: åç«¯APIæœåŠ¡
- `5604`: ç”¨æˆ·H5ç«¯
- `5609`: å•†æˆ·ç®¡ç†ç«¯
- `3306`: MySQLæ•°æ®åº“
- `6379`: Redisç¼“å­˜

### ç¯å¢ƒå˜é‡è¯´æ˜

| å˜é‡å | è¯´æ˜ | é»˜è®¤å€¼ |
|--------|------|--------|
| NODE_ENV | è¿è¡Œç¯å¢ƒ | development |
| DATABASE_HOST | æ•°æ®åº“ä¸»æœº | 127.0.0.1 |
| DATABASE_PORT | æ•°æ®åº“ç«¯å£ | 3306 |
| DATABASE_USERNAME | æ•°æ®åº“ç”¨æˆ·å | root |
| DATABASE_PASSWORD | æ•°æ®åº“å¯†ç  | - |
| DATABASE_NAME | æ•°æ®åº“å | lch_v4 |
| REDIS_HOST | Redisä¸»æœº | 127.0.0.1 |
| REDIS_PORT | Redisç«¯å£ | 6379 |
| JWT_SECRET | JWTå¯†é’¥ | - |
| WECHAT_APPID | å¾®ä¿¡åº”ç”¨ID | - |
| WECHAT_SECRET | å¾®ä¿¡åº”ç”¨å¯†é’¥ | - |

## ğŸ³ Dockeréƒ¨ç½²ï¼ˆå¯é€‰ï¼‰

### å¯åŠ¨æ•°æ®åº“æœåŠ¡
```bash
docker-compose -f docker-compose.db.yml up -d
```

### å®Œæ•´å®¹å™¨åŒ–éƒ¨ç½²
```bash
docker-compose up -d
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
lch_qoder/
â”œâ”€â”€ lch-backend/          # åç«¯APIæœåŠ¡ (NestJS)
â”œâ”€â”€ lch-platform/         # å¹³å°ç®¡ç†ç«¯ (Vue3)
â”œâ”€â”€ lch-merchant/         # å•†æˆ·ç®¡ç†ç«¯ (Vue3)
â”œâ”€â”€ lch-user-h5/          # ç”¨æˆ·H5ç«¯ (Vue3)
â”œâ”€â”€ doc/                  # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ test/                 # æµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ scripts/              # æ„å»ºè„šæœ¬
â”œâ”€â”€ .env.local            # ç¯å¢ƒé…ç½®æ–‡ä»¶
â”œâ”€â”€ .env.template         # ç¯å¢ƒé…ç½®æ¨¡æ¿
â”œâ”€â”€ database_export.sql   # æ•°æ®åº“å¯¼å‡ºæ–‡ä»¶
â”œâ”€â”€ docker-compose.yml    # Dockerç¼–æ’æ–‡ä»¶
â”œâ”€â”€ quick-start.bat       # å¿«é€Ÿå¯åŠ¨è„šæœ¬
â””â”€â”€ README.md            # é¡¹ç›®è¯´æ˜
```

## ğŸ” åŠŸèƒ½éªŒè¯

### 1. åç«¯APIéªŒè¯
è®¿é—® http://localhost:5603 æŸ¥çœ‹APIçŠ¶æ€

### 2. å¹³å°ç®¡ç†ç«¯éªŒè¯
1. è®¿é—® http://localhost:5602/login
2. ä½¿ç”¨ç®¡ç†å‘˜è´¦æˆ·ç™»å½•
3. æŸ¥çœ‹ä»ªè¡¨ç›˜æ•°æ®

### 3. å•†æˆ·ç®¡ç†ç«¯éªŒè¯
1. è®¿é—® http://localhost:5609/login
2. ä½¿ç”¨æµ‹è¯•å•†æˆ·è´¦æˆ·ç™»å½•
3. æŸ¥çœ‹å•†æˆ·ä»ªè¡¨ç›˜

### 4. ç”¨æˆ·H5ç«¯éªŒè¯
è®¿é—® http://localhost:5604 æŸ¥çœ‹ç”¨æˆ·ç«¯ç•Œé¢

## ğŸ†˜ å¸¸è§é—®é¢˜

### æ•°æ®åº“è¿æ¥å¤±è´¥
1. æ£€æŸ¥MySQLæœåŠ¡æ˜¯å¦è¿è¡Œ
2. ç¡®è®¤æ•°æ®åº“ç”¨æˆ·åå’Œå¯†ç 
3. ç¡®è®¤æ•°æ®åº“lch_v4æ˜¯å¦å­˜åœ¨

### Redisè¿æ¥å¤±è´¥
1. æ£€æŸ¥RedisæœåŠ¡æ˜¯å¦è¿è¡Œ
2. ç¡®è®¤Redisç«¯å£6379æ˜¯å¦å¼€æ”¾

### ç«¯å£å†²çª
1. æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨ï¼š`netstat -an | findstr :5603`
2. ä¿®æ”¹vite.config.tsä¸­çš„ç«¯å£é…ç½®
3. é‡å¯ç›¸åº”æœåŠ¡

### ä¾èµ–å®‰è£…å¤±è´¥
1. æ¸…ç†ç¼“å­˜ï¼š`npm cache clean --force`
2. åˆ é™¤node_modulesï¼š`rm -rf node_modules`
3. é‡æ–°å®‰è£…ï¼š`npm install`

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. Node.jsç‰ˆæœ¬æ˜¯å¦ >= 16.0.0
2. æ•°æ®åº“å’ŒRedisæ˜¯å¦æ­£å¸¸è¿è¡Œ
3. ç«¯å£æ˜¯å¦å†²çª
4. ç¯å¢ƒå˜é‡é…ç½®æ˜¯å¦æ­£ç¡®

## ğŸ”„ æ›´æ–°éƒ¨ç½²

### æ‹‰å–æœ€æ–°ä»£ç 
```bash
git pull origin main
```

### æ›´æ–°ä¾èµ–
```bash
npm run install:all
```

### æ•°æ®åº“è¿ç§»
```bash
# å¦‚æœ‰æ•°æ®åº“ç»“æ„å˜æ›´ï¼Œé‡æ–°å¯¼å…¥
mysql -u root -p lch_v4 < database_export.sql
```

### é‡å¯æœåŠ¡
```bash
# ä½¿ç”¨å¿«é€Ÿå¯åŠ¨è„šæœ¬é‡å¯æ‰€æœ‰æœåŠ¡
./quick-start.bat
```

---

ğŸ‰ **æ­å–œï¼æ‚¨å·²æˆåŠŸéƒ¨ç½²äº®è½¦æƒ æ™ºèƒ½æ´—è½¦ç®¡ç†ç³»ç»Ÿï¼**

å¦‚éœ€æ›´è¯¦ç»†çš„å¼€å‘æ–‡æ¡£ï¼Œè¯·æŸ¥çœ‹ `doc/` ç›®å½•ä¸­çš„ç›¸å…³æ–‡æ¡£ã€‚