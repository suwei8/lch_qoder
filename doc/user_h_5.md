# 《用户端-微信公众号服务号H5》功能需求文档

## 一、总体目标
- 面向 **普通车主用户**
- 通过微信公众号服务号直接访问 H5 页面（免安装APP）
- 提供 **洗车消费 → 支付 → 订单管理 → 会员权益** 的完整闭环

## 二、页面结构

### 2.1 首页（服务入口）
- 顶部Banner（系统公告、优惠活动）
- 附近洗车点（基于微信定位 API）
  - 门店名称 / 地址 / 距离
  - 设备状态（可用/占用/离线）
  - 一键导航（跳转地图）
- 快捷入口：【立即洗车】【充值中心】【我的订单】

### 2.2 门店详情页
- 门店信息：名称 / 地址 / 联系电话 / 营业时间
- 设备列表：编号、状态（空闲/使用中/故障）
- 费用规则（元/分钟、最低消费）
- 操作按钮：【立即启动】

### 2.3 设备控制与启动
- 展示当前设备状态
- 用户操作：
  1. 点击【立即启动】
  2. 弹出支付确认窗口
  3. 调用智链物联API → 下发启动指令
  4. 等待设备上报【启动成功】
- 页面实时展示倒计时（使用时长、费用累计）

### 2.4 支付与结算
- 支付方式：微信支付 / 余额支付 / 充值赠送套餐抵扣
- 支付确认页：金额、优惠券抵扣（支持新人专享条件）
- 使用结束：生成订单，展示订单详情

### 2.5 订单模块
- 订单列表：门店 / 设备 / 金额 / 状态（已完成、进行中、退款中）
- 订单详情：订单号、时间、金额、设备、支付方式
- 异常申诉（退款）

### 2.6 充值中心
- 套餐：充100送20、充200送50、充500送150
- 支付方式：微信支付
- 支付成功后更新余额与赠送余额

### 2.7 优惠券
- 展示用户优惠券
- 属性：满减/折扣、新人专享、有效期
- 支付时可选择使用

### 2.8 个人中心
- 用户信息：微信头像、昵称、手机号
- 余额：余额、赠送余额
- 菜单：【我的订单】【充值中心】【我的优惠券】【联系客服】【退出登录】

## 三、用户操作流程
1. 进入公众号 → 首页 → 选择门店
2. 选择设备 → 启动设备 → 支付
3. 使用中实时显示 → 结束 → 结算
4. 充值/套餐购买 → 更新余额
5. 个人中心 → 管理订单、余额、优惠券

## 四、异常与消息提醒
- 余额不足提醒 → 跳转充值页
- 设备异常 → 自动退款
- 订单通知（支付成功/结算完成） → 微信模板消息推送

